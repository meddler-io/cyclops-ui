<nb-layout withscroll>
    <nb-layout-header fixed>

        <ng-container *ngIf="engagementDetails | async as engagementDetails">

            <!-- Back Buttons -->
            <div fxLayout="row" fxLayoutAlign="start center">

                <button [routerLink]=" [ '/' , 'devsec' , 'home' ] " nbButton appearance="ghost" status="info">
                    <nb-icon icon="corner-left-up-outline">

                    </nb-icon>
                </button>


            </div>





            <!--  -->
            <div fxFlex fxLayoutAlign="start center">

                <div>

                    <ng-container *ngFor="let tab of tabs ">

                        <button class="tab-button" [appearance]="rla?.isActive ?  'outline' : 'ghost' "
                            [status]="rla?.isActive ?  'info' : 'basic' " size="small" [routerLink]="tab[1]"
                            [routerLinkActiveOptions]="{ exact: false }" routerLinkActive #rla="routerLinkActive"
                            nbButton>
                            {{tab[0]}}
                        </button>
                    </ng-container>
                </div>



                <!-- <div *ngIf="false" fxFlex fxLayoutAlign="end center">





                <button class="tab-button" [appearance]="rla_sf?.isActive ?  'ghost' : 'ghost' "
                    [status]="rla_sf?.isActive ?  'success' : 'basic' " size="small" shape="round"
                    [routerLink]=" [  'select_finding' , '658c9421086a02a65aef6b6f'] "
                    [routerLinkActiveOptions]="{ exact: false }" routerLinkActive #rla_sf="routerLinkActive" nbButton>
                    Select Finding
                </button>


                <button class="tab-button" [appearance]="rla_d?.isActive ?  'ghost' : 'ghost' "
                    [status]="rla_d?.isActive ?  'success' : 'basic' " size="small" shape="round"
                    [routerLink]=" [  'details'] " [routerLinkActiveOptions]="{ exact: false }" routerLinkActive
                    #rla_d="routerLinkActive" nbButton>
                    Details
                </button>

                <button class="tab-button" [appearance]="rla_c?.isActive ?  'outline' : 'ghost' "
                    [status]="rla_c?.isActive ?  'success' : 'basic' " size="small" shape="round"
                    [routerLink]=" [ './', 'create'] " [routerLinkActiveOptions]="{ exact: false }" routerLinkActive
                    #rla_c="routerLinkActive" nbButton>
                    Report Builder
                </button>


                <button class="tab-button" [appearance]="rla_f?.isActive ?  'outline' : 'ghost' "
                    [status]="rla_f?.isActive ?  'success' : 'basic' " size="small" shape="round"
                    [routerLink]=" [ './', 'draft_review'] " [routerLinkActiveOptions]="{ exact: false }"
                    routerLinkActive #rla_f="routerLinkActive" nbButton>
                    Review Findings(d)
                </button>

                <button class="tab-button" [appearance]="rla_ato?.isActive ?  'outline' : 'ghost' "
                    [status]="rla_ato?.isActive ?  'success' : 'basic' " size="small" shape="round"
                    [routerLink]=" [ './', 'assign_task'] " [routerLinkActiveOptions]="{ exact: false }"
                    routerLinkActive #rla_ato="routerLinkActive" nbButton>
                    Assign(o)
                </button>

                <button class="tab-button" [appearance]="rla_ip?.isActive ?  'outline' : 'ghost' "
                    [status]="rla_ip?.isActive ?  'success' : 'basic' " size="small" shape="round"
                    [routerLink]=" [ './', 'in_progress'] " [routerLinkActiveOptions]="{ exact: false }"
                    routerLinkActive #rla_ip="routerLinkActive" nbButton>
                    In Progress(o)
                </button>








                <button class="tab-button" [appearance]="rla_m?.isActive ?  'outline' : 'ghost' "
                    [status]="rla_m?.isActive ?  'success' : 'basic' " size="small" shape="round"
                    [routerLink]=" [  'manage'] " [routerLinkActiveOptions]="{ exact: false }" routerLinkActive
                    #rla_m="routerLinkActive" nbButton>
                    Manage
                </button>






            </div> -->




            </div>



            <div fxLayout="column">
                <div>

                    {{engagementDetails?.business?.name}}
                    <nb-icon status="info" icon="chevron-right-outline"></nb-icon>

                    {{engagementDetails?.project?.name}}


                    &nbsp;
                    {{engagementDetails?.state}}



                </div>

                <div *ngIf="false" class="text-caption">
                    {{engagementDetails?.application?.title}}
                    (
                    {{engagementDetails?.application?.platform}}

                    )


                </div>


            </div>



            <button (click)="nextAction( dialogTemplate )" class="publish-button" outline size="small" shape="round"
                nbButton>
                Publish

                {{next_step_title[ engagementDetails?.state ]}}
            </button>

            <!--  -->
        </ng-container>


    </nb-layout-header>






    <nb-layout-column style="padding: 5px;">






        <router-outlet>

        </router-outlet>


    </nb-layout-column>


    <nb-layout-footer style="padding: 0;">
        <div fxFlex fxLayoutAlign="end end">

            <app-manage-engagement-state fx></app-manage-engagement-state>
        </div>

    </nb-layout-footer>
</nb-layout>

<ng-template #dialogTemplate>
    <app-next-action-screen>

    </app-next-action-screen>
</ng-template>